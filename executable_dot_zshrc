# .zshrc common
#
# These features are common across systems,
# and are not tied to specific systems (beyond installed plugins)

# Path to your oh-my-zsh installation.
#export ZSH="/home/connor/.oh-my-zsh"
export ZSH=$HOME/.oh-my-zsh
fpath+=~/.zfunc

# Set name of the theme to load --- if set to "random", it will
# load a random theme each time oh-my-zsh is loaded, in which case,
# to know which specific one was loaded, run: echo $RANDOM_THEME
# See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes
ZSH_THEME=""

# Some custom functionality
GIT_AUTO_FETCH_INTERVAL=30

# Some Vi management
VI_MODE_RESET_PROMPT_ON_MODE_CHANGE=true
VI_MODE_SET_CURSOR=true

# Which plugins would you like to load?
# Standard plugins can be found in $ZSH/plugins/
# Custom plugins may be added to $ZSH_CUSTOM/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
# Add wisely, as too many plugins slow down shell startup.
plugins=(
	archlinux common-aliases git-escape-magic pj rsync
	sudo systemd tmux vi-mode zsh-autosuggestions

	fast-syntax-highlighting

)

# Archived plugins
# colorize, command-not-found fast-syntax-highlighting
# git-auto-fetch git gulp jsontools lol
# copyfile cp history ng npm themes vscode

# Start tmux with the shell
ZSH_TMUX_AUTOSTART=false

# Create a new session per shell
ZSH_TMUX_AUTOCONNECT=false

# Enforce unicode in tmux
ZSH_TMUX_UNICODE=true

# DONT automatically change to using `screen`.
ZSH_TMUX_FIXTERM=false
# Source the main .oh-my-zsh scripts
source $ZSH/oh-my-zsh.sh

# changes to blinking bar
echo -e -n "\x1b[\x35 q" 

# Import my custom methods
source $HOME/.zsh/functions.zsh

# Import my custom aliases
source $HOME/.zsh/aliases.zsh

# If we have a custom config file for this device, import it.
HOST_SPECIFIC_CONFIG="$HOME/.zsh/hosts/$(hostname).zsh"
if [ -f $HOST_SPECIFIC_CONFIG ]; then source $HOST_SPECIFIC_CONFIG; fi

# Set up the powerline prompt styling
if [ "$TERM" != "linux" ]; then install_powerline_precmd; fi

# Remove directory background colours to ensure that values are readable
#hash dircolors &>/dev/null && eval "$(dircolors -p | \
#    sed 's/ 4[0-9];/ 01;/; s/;4[0-9];/;01;/g; s/;4[0-9] /;01 /' | \
#    dircolors /dev/stdin)"

# Load nodenv automatically by appending
# the following to your profile:
hash nodenv &>/dev/null && eval "$(nodenv init -)"
#hash atuin &>/dev/null && eval "$(atuin init zsh)"

# Hash holding paths that shouldn't be grepped (globbed) â€“ blacklist for slow disks, mounts, etc.:
typeset -gA FAST_BLIST_PATTERNS
FAST_BLIST_PATTERNS[/mnt/c/*]=1

_launch_tmux
